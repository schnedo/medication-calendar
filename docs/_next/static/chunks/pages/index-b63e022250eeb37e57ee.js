(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8738:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return Nn}});var i=t(5893),r=t(4942),o=t(7757),a=t.n(o),u=t(5861),c=t(7294),l=t(1120),s=t(2467),d=t(8463),f=t(9912),v=t(9956),m=t(2318);function h(n){return"".concat("Ch.-B."," ").concat(n.number)}function p(n){return"".concat(n.amount," ").concat("ml")}var x=(0,l.Z)((function(n){return{row:{display:"flex",justifyContent:"space-between"},content:{flex:"1"},trailer:{marginLeft:n.spacing(1)},container:{width:"100%",textAlign:"justify"}}}));function j(n){var e=n.medication,t=e.medicament,r=t.name,o=t.batchNumber,a=e.dose,u=n.onClick,c=x(),l=c.row,j=c.content,Z=c.trailer,b=c.container;return(0,i.jsx)(s.Z,{onClick:u,disableRipple:!u,className:b,children:(0,i.jsx)(d.Z,{className:b,children:(0,i.jsxs)(f.Z,{className:l,children:[(0,i.jsxs)(v.Z,{className:j,children:[(0,i.jsx)(m.Z,{children:r}),(0,i.jsx)(m.Z,{color:"textSecondary",children:h(o)})]}),(0,i.jsx)(m.Z,{className:Z,children:p(a)})]})})})}function Z(n){if(void 0===n)return"00";var e=n.toString();return 1===e.length?"0".concat(e):e}function b(n){return"".concat(Z(n.hours),":").concat(Z(n.minutes))}var g=t(9546),y=t(3323),C=(0,l.Z)((function(n){return{container:{width:"100%"},header:{marginRight:n.spacing(1)},trailer:{marginLeft:n.spacing(1),display:"flex",flexDirection:"column",justifyContent:"space-between"},row:{display:"flex"},medicationsList:{flex:"1",display:"flex",flexDirection:"column",justifyContent:"space-between","&>*":{marginBottom:n.spacing(1),"&:last-child":{marginBottom:0}}}}}));function w(n){var e=n.medicationEntry,t=e.date,r=e.medications,o=e.comments,a=e.duration,u=e.bodyMass,c=n.onClick,l=C(),h=l.container,p=l.medicationsList,x=l.row,Z=l.header,w=l.trailer;return(0,i.jsx)(s.Z,{onClick:c,className:h,disableRipple:!c,children:(0,i.jsx)(d.Z,{className:h,children:(0,i.jsxs)(f.Z,{className:x,children:[(0,i.jsx)(m.Z,{className:Z,children:(0,g.Z)(t,"EEEEEE dd")}),(0,i.jsxs)(v.Z,{className:p,children:[r.map((function(n){return(0,i.jsx)(j,{medication:n},n.id)})),(0,i.jsx)(m.Z,{align:"left",children:o})]}),(0,i.jsxs)(v.Z,{className:w,children:[(0,i.jsx)(m.Z,{children:b(a)}),(0,i.jsx)(m.Z,{children:(0,y.hh)(u)})]})]})})})}var S=t(8273),k=t(3944),N=t(5477),E=t(2822),O=t(6837),P=t(998),M=t(3703),B=function(n,e){var t,i=(0,M.Z)(e.date).valueOf();return n.set(i,[].concat((0,k.Z)(null!==(t=n.get(i))&&void 0!==t?t:[]),[e])),n};function D(n){var e=n.medicationEntries,t=n.onSelect,r=function(n){var e=n.reduce(B,new Map);return Array.from(e.entries()).sort((function(n,e){var t=(0,S.Z)(n,1)[0];return(0,S.Z)(e,1)[0]-t}))}(null!==e&&void 0!==e?e:[]);return null===e?(0,i.jsx)(N.Z,{}):(0,i.jsx)(E.Z,{children:r.map((function(n){var e=(0,S.Z)(n,2),r=e[0],o=e[1];return(0,i.jsxs)(c.Fragment,{children:[(0,i.jsx)(O.Z,{children:(0,g.Z)(r,"MMMM y")}),o.map((function(n){return(0,i.jsx)(P.Z,{children:(0,i.jsx)(w,{medicationEntry:n,onClick:function(e){var i=e.clientX,r=e.clientY;t({medicationEntry:n,pointerPosition:{clientX:i,clientY:r}})}})},n.id)}))]},r)}))})}var L=t(8676),A=t(2663),I=t(6083),R=t(9525),_=t(8286),T=t(6856),F=t(282),X=t(2191),Y=t(5639),G=t(4436),K=t(3700),V=t(2474),z=function(n){return(0,i.jsx)(Y.Z,{value:n,children:n},n)},W=(0,l.Z)((function(n){return{durationSelect:{display:"flex","&>*":{marginRight:n.spacing(1),"&:last-child":{marginRight:n.spacing(0)}}}}}));function q(n){var e,t=n.value,r=n.label,o=n.max,a=n.onChange,u="".concat(r,"-label");return(0,i.jsxs)(G.Z,{children:[(0,i.jsx)(K.Z,{id:u,children:r}),(0,i.jsx)(V.Z,{labelId:u,value:t.toString(),onChange:function(n){return a(parseInt(n.target.value))},children:(e=o,(0,k.Z)(Array(e).keys())).map(z)})]})}function H(n){var e=n.value,t=e.minutes,r=e.hours,o=n.onChange,a=W().durationSelect;return(0,i.jsxs)(v.Z,{className:a,children:[(0,i.jsx)(q,{label:"h",value:null!==r&&void 0!==r?r:0,max:23,onChange:function(n){o({minutes:t,hours:n})}}),(0,i.jsx)(q,{value:null!==t&&void 0!==t?t:0,label:"min",max:59,onChange:function(n){o({minutes:n,hours:r})}})]})}var J=t(7212),Q=t(7812),U=t(4593),$=t(3430),nn=t(6562),en=t(4586),tn=(0,l.Z)((function(n){return{formGroup:{"&>*":{marginTop:n.spacing(1),"&:first-child":{marginTop:"0"}}}}}));function rn(n,e){var t=!!n;return e(t),t}function on(n){var e,t,r,o,l=n.open,s=n.medication,d=n.onClose,f=n.onSubmit,v=n.onAbort,m=(0,c.useRef)(null!==(e=null===s||void 0===s?void 0:s.id)&&void 0!==e?e:(0,en.Z)()),h=(0,c.useState)(null!==(t=null===s||void 0===s?void 0:s.dose.amount.toString())&&void 0!==t?t:""),p=h[0],x=h[1],j=(0,c.useState)(!0),Z=j[0],b=j[1],g=(0,c.useState)(null!==(r=null===s||void 0===s?void 0:s.medicament.name)&&void 0!==r?r:""),y=g[0],C=g[1],w=(0,c.useState)(!0),S=w[0],k=w[1],N=(0,c.useState)(null!==(o=null===s||void 0===s?void 0:s.medicament.batchNumber.number.toString())&&void 0!==o?o:""),E=N[0],O=N[1],P=(0,c.useState)(!0),M=P[0],B=P[1];(0,c.useEffect)((function(){var n,e,t,i;l&&(m.current=null!==(n=null===s||void 0===s?void 0:s.id)&&void 0!==n?n:(0,en.Z)(),x(null!==(e=null===s||void 0===s?void 0:s.dose.amount.toString())&&void 0!==e?e:""),b(!0),C(null!==(t=null===s||void 0===s?void 0:s.medicament.name)&&void 0!==t?t:""),k(!0),O(null!==(i=null===s||void 0===s?void 0:s.medicament.batchNumber.number.toString())&&void 0!==i?i:""),B(!0))}),[l,s]);var D=f?(0,u.Z)(a().mark((function n(){var e,t,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=rn(p,b),t=rn(y,k),i=rn(E,B),!(e&&t&&i)){n.next=6;break}return n.next=6,f({id:m.current,medicament:{name:y,batchNumber:{number:parseInt(E)}},dose:{amount:parseInt(p)}});case 6:case"end":return n.stop()}}),n)}))):void 0,L=tn().formGroup;return(0,i.jsxs)(A.Z,{open:l,onClose:function(n,e){d&&d(n,e)},children:[(0,i.jsx)(I.Z,{children:"Neue Medikation"}),(0,i.jsx)(R.Z,{children:(0,i.jsxs)(nn.Z,{className:L,children:[(0,i.jsx)(_.Z,{id:"nameInput",label:"Name",value:y,onChange:function(n){var e=n.target.value;return C(e)},onBlur:function(n){return rn(n.target.value,k)},onFocus:function(){return k(!0)},error:!S,helperText:!S&&"Bitte Name eingeben",variant:"outlined"}),(0,i.jsx)(_.Z,{id:"batchNumberInput",label:"Chargenbezeichnung",type:"number",value:E,onChange:function(n){var e=n.target.value;return O(e)},onBlur:function(n){return rn(n.target.value,B)},onFocus:function(){return B(!0)},error:!M,helperText:!M&&"Bitte Chargenbezeichnung eingeben",variant:"outlined"}),(0,i.jsx)(_.Z,{id:"doseInput",label:"Dosis",type:"number",value:p,onChange:function(n){var e=n.target.value;return x(e)},onBlur:function(n){return rn(n.target.value,b)},onFocus:function(){return b(!0)},error:!Z,helperText:!Z&&"Bitte Dosis eingeben",variant:"outlined"})]})}),(0,i.jsxs)(T.Z,{children:[(0,i.jsx)(F.Z,{color:"primary",onClick:function(){v&&v()},children:"Abbrechen"}),(0,i.jsx)(F.Z,{color:"primary",onClick:D,children:"Speichern"})]})]})}var an=(0,l.Z)((function(){return{medicationsAddContainer:{display:"flex",justifyContent:"space-between"}}}));function un(n){var e=n.value,t=n.onChange,r=(0,c.useState)(null),o=r[0],l=r[1],s=function(){return l(null)},d=(0,c.useState)(!1),f=d[0],m=d[1],h=function(){return m(!0)},p=function(){m(!1),s()},x=function(){return p()},Z=function(){var n=(0,u.Z)(a().mark((function n(i){var r,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t&&(r=e.findIndex((function(n){return n.id===i.id})),o=-1===r?[].concat((0,k.Z)(e),[i]):[].concat((0,k.Z)(e.slice(0,r)),[i],(0,k.Z)(e.slice(r+1))),t(o)),p();case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),b=an().medicationsAddContainer;return(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(J.Z,{children:"Eintr\xe4ge"}),e.map((function(n){return(0,i.jsx)(j,{medication:n,onClick:function(e){var t=e.clientX,i=e.clientY;return l({medication:n,pointerPosition:{clientX:t,clientY:i}})}},n.id)})),(0,i.jsxs)(v.Z,{className:b,children:[(0,i.jsx)("div",{}),(0,i.jsx)(Q.Z,{onClick:function(){s(),h()},children:(0,i.jsx)($.Z,{})})]}),(0,i.jsxs)(U.Z,{open:!!o,onClose:s,anchorReference:"anchorPosition",anchorPosition:o?{top:o.pointerPosition.clientY,left:o.pointerPosition.clientX}:void 0,children:[(0,i.jsx)(Y.Z,{onClick:function(){return h()},children:"Bearbeiten"}),(0,i.jsx)(Y.Z,{onClick:function(){t&&o&&t(e.filter((function(n){return n!=o.medication}))),s()},children:"L\xf6schen"})]}),(0,i.jsx)(on,{open:f,medication:null===o||void 0===o?void 0:o.medication,onClose:x,onAbort:x,onSubmit:Z})]})}var cn=(0,l.Z)((function(n){return{dialogContent:{display:"flex",flexDirection:"column","&>*":{marginBottom:n.spacing(2),"&:last-child":{marginBottom:n.spacing(0)}}}}})),ln=function(){return new Date},sn={minutes:0,hours:0},dn=[];function fn(n){var e,t,r,o,l,s,d,f=n.open,v=n.medicationEntry,m=n.onClose,h=n.onSubmit,p=n.onAbort,x=(0,y.aF)().user.bodyMass,j=(0,c.useRef)(null!==(e=null===v||void 0===v?void 0:v.id)&&void 0!==e?e:""),Z=(0,c.useState)(null!==(t=null===v||void 0===v?void 0:v.date)&&void 0!==t?t:ln()),b=Z[0],g=Z[1],C=(0,c.useState)(null!==(r=null===v||void 0===v?void 0:v.duration)&&void 0!==r?r:sn),w=C[0],S=C[1],k=(0,c.useState)(null!==(o=null!==(l=null===v||void 0===v?void 0:v.bodyMass.amount.toString())&&void 0!==l?l:null===x||void 0===x?void 0:x.amount.toString())&&void 0!==o?o:"60"),N=k[0],E=k[1],O=(0,c.useState)(null!==(s=null===v||void 0===v?void 0:v.comments)&&void 0!==s?s:""),P=O[0],M=O[1],B=(0,c.useState)(null!==(d=null===v||void 0===v?void 0:v.medications)&&void 0!==d?d:dn),D=B[0],L=B[1];(0,c.useEffect)((function(){var n,e,t,i,r,o,a;f&&(g(null!==(n=null===v||void 0===v?void 0:v.date)&&void 0!==n?n:ln()),S(null!==(e=null===v||void 0===v?void 0:v.duration)&&void 0!==e?e:sn),E(null!==(t=null!==(i=null===v||void 0===v?void 0:v.bodyMass.amount.toString())&&void 0!==i?i:null===x||void 0===x?void 0:x.amount.toString())&&void 0!==t?t:"60"),M(null!==(r=null===v||void 0===v?void 0:v.comments)&&void 0!==r?r:""),L(null!==(o=null===v||void 0===v?void 0:v.medications)&&void 0!==o?o:dn),j.current=null!==(a=null===v||void 0===v?void 0:v.id)&&void 0!==a?a:"")}),[x,v,f]);var Y=h?(0,u.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h({id:j.current,date:b,duration:w,bodyMass:{amount:parseInt(N)},comments:P,medications:D});case 2:case"end":return n.stop()}}),n)}))):void 0,G=cn().dialogContent;return(0,i.jsxs)(A.Z,{open:f,onClose:m,children:[(0,i.jsx)(I.Z,{children:v?"Eintrag bearbeiten":"Neuer Eintrag"}),(0,i.jsxs)(R.Z,{className:G,children:[(0,i.jsx)(_.Z,{id:"bodyMassInput",label:"K\xf6rpergewicht",type:"number",value:N,onChange:function(n){return E(n.target.value)}}),(0,i.jsx)(X.M,{id:"dateInput",label:"Datum",value:b,onChange:function(n){return g(null!==n&&void 0!==n?n:b)}}),(0,i.jsx)(H,{value:w,onChange:S}),(0,i.jsx)(_.Z,{id:"commentsInput",label:"Kommentare",multiline:!0,value:P,onChange:function(n){return M(n.target.value)}}),(0,i.jsx)(un,{value:D,onChange:L})]}),(0,i.jsxs)(T.Z,{children:[(0,i.jsx)(F.Z,{color:"primary",onClick:p,children:"Abbrechen"}),(0,i.jsx)(F.Z,{color:"primary",onClick:Y,children:"Speichern"})]})]})}var vn=t(3832),mn=t(3758),hn=t(1556),pn=t(6727),xn=t(7920);pn.vfs=xn.I.vfs;var jn={myLayout:{hLineWidth:function(n,e){return 0===n||n===e.table.body.length?0:n===e.table.headerRows?2:1},vLineWidth:function(n,e){var t;return 0===n||n===(null===(t=e.table.widths)||void 0===t?void 0:t.length)?0:1},paddingLeft:function(){return 8},paddingRight:function(){return 8}}},Zn=function(n){var e=n.medicament,t=e.name,i=e.batchNumber,r=n.dose;return"".concat(t," / ").concat(h(i),": ").concat(p(r))},bn=function(n){return n.map(Zn).join("\n")},gn=function(n){var e=n.date,t=n.medications,i=n.duration,r=n.bodyMass,o=n.comments;return[(0,g.Z)(e,"LLL d y"),bn(t),b(i),(0,y.hh)(r),o]};var yn=t(313);function Cn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function wn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Cn(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Cn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var Sn=function(n,e,t){return n.filter((function(n){var i=n.date;return function(n,e,t){return(0,yn.Z)(t,e)&&(0,yn.Z)(n,t)}(e,t,i)})).sort((function(n,e){var t=n.date;return e.date.valueOf()-t.valueOf()}))},kn=(0,l.Z)((function(n){return{actionButton:{position:"fixed",bottom:n.spacing(2),right:n.spacing(2)},printForm:{"&>*":{marginTop:n.spacing(1),"&:first-child":{marginTop:0}}}}}));function Nn(n){var e=n.AppBar,t=(0,L.t)(),r=t.entries,o=t.deleteEntry,l=t.saveEntry,s=(0,c.useState)(null),d=s[0],f=s[1],v=(0,c.useState)(!1),m=v[0],h=v[1],p=function(){return h(!0)},x=function(){return f(null)},j=function(){h(!1),x()},Z=function(){var n=(0,u.Z)(a().mark((function n(e){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l(e);case 2:j();case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),b=function(){var n=(0,u.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!d){n.next=4;break}return n.next=3,o(d.medicationEntry);case 3:x();case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),g=function(){var n=(0,u.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:p();case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),y=(0,c.useState)(!1),C=y[0],w=y[1],S=(0,c.useState)({start:(0,M.Z)(new Date),end:new Date}),N=S[0],E=S[1],O=r?{icon:hn.Z,ariaLabel:"print",onClick:function(){w(!0)}}:void 0,P=kn(),B=P.actionButton,_=P.printForm;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e,{title:"Medikamenten Tagebuch",rightButton:O}),(0,i.jsxs)(A.Z,{open:C,onClose:function(){return w(!1)},children:[(0,i.jsx)(I.Z,{children:"Drucken"}),(0,i.jsxs)(R.Z,{children:[(0,i.jsx)(J.Z,{children:"Bitte w\xe4hlen Sie den Zeitraum aus."}),(0,i.jsxs)(nn.Z,{className:_,children:[(0,i.jsx)(X.M,{label:"Von",value:N.start,onChange:function(n){return n&&E((function(e){return wn(wn({},e),{},{start:n})}))},inputVariant:"outlined"}),(0,i.jsx)(X.M,{label:"Bis",value:N.end,onChange:function(n){return n&&E((function(e){return wn(wn({},e),{},{end:n})}))},inputVariant:"outlined"})]}),(0,i.jsxs)(T.Z,{children:[(0,i.jsx)(F.Z,{id:"printAbort",onClick:function(){return w(!1)},children:"Abbrechen"}),(0,i.jsx)(F.Z,{id:"printConfirm",onClick:function(){return r&&function(n){var e={content:{layout:"myLayout",table:{headerRows:1,widths:["auto","*","auto","auto","auto"],body:[["Datum","Medikation","Dauer","Gewicht","Kommentare"]].concat((0,k.Z)(n.map(gn)))}}};return pn.createPdf(e,jn)}(Sn(r,N.start,N.end)).open()},children:"Drucken"})]})]})]}),(0,i.jsxs)(vn.Z,{component:"main",children:[(0,i.jsx)(D,{medicationEntries:r,onSelect:function(n){return f(n)}}),(0,i.jsx)(fn,{open:m,medicationEntry:null===d||void 0===d?void 0:d.medicationEntry,onClose:j,onAbort:j,onSubmit:Z}),(0,i.jsxs)(U.Z,{open:!!d,keepMounted:!0,onClose:x,anchorReference:"anchorPosition",anchorPosition:d?{top:d.pointerPosition.clientY,left:d.pointerPosition.clientX}:void 0,children:[(0,i.jsx)(Y.Z,{onClick:g,children:"Bearbeiten"}),(0,i.jsx)(Y.Z,{onClick:b,children:"L\xf6schen"})]}),(0,i.jsx)(mn.Z,{color:"primary","aria-label":"addMedicationEntry",onClick:p,className:B,children:(0,i.jsx)($.Z,{})})]})]})}},5301:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8738)}])}},function(n){n.O(0,[957,270,871,774,888,179],(function(){return e=5301,n(n.s=e);var e}));var e=n.O();_N_E=e}]);